<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<title></title>
	<link rel="stylesheet" href="../../static/renponsetable/layer/theme/default/layer.css">
	<link rel="stylesheet" type="text/css" href="../../static/renponsetable/css/reponse.css">
	<style type="text/css">
		.alertceng{
			background: #FFFFFF;
			padding: 10px;
			display: none;
		}
		.alertceng span.title{
			margin-right: 10px;
		}
	</style>
	<script src="https://cdn.staticfile.org/angular.js/1.4.6/angular.min.js"></script>
	<script src="https://www.jq22.com/jquery/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="../../static/renponsetable/js/jquery.basictable.min.js"></script>
	<script type="text/javascript" src="../../static/renponsetable/reponsetable.min.js"></script>
	<script type="text/javascript" src="../../static/renponsetable/layer/layer.js"></script>
</head>
<body ng-app="myApp" ng-controller="myCtrl">
	<div class="layui-fluid layadmin-homepage-fluid" style="background: #fff;width:90%;margin:0 auto;">
		<div id="page">
			<div class="btn-container">
				<button class="layui-btn" onclick="addtr();">新增一行</button>
				<button class="layui-btn" onclick="ExportExcel();">导出Excel</button>
				<!--<button class="layui-btn" onclick="resivetabledata();">获取table数据</button>
				<button class="layui-btn" onclick="reloadtable();">刷新table表格</button>
				<button class="layui-btn" onclick="coldata();">获取某一列的数据</button>-->
			</div>
			<table id="table" class="reponsetable" ></table>
			<script type="text/html" id="editer">
				<a class="layui-btn layui-btn-xs" onclick="edittr(this)">编辑</a>
				<a class="layui-btn layui-btn-xs" onclick="deletetr(this)">删除</a>
				<!--<a class="layui-btn layui-btn-xs" onclick="uptr(this)">上移</a>
				<a class="layui-btn layui-btn-xs" onclick="downtr(this)">下移</a>-->
		  </script>
		</div>
	</div>
	<div id="editcontent" class="alertceng">
			药品流水号:<input type="text" id="serialNumber"/>
			通用名:<input type="text" id="commonName"/>
			<p><span class="title">剂型:</span><input type="text" id="dosageForm"/></p>
			<p><span class="title">规格:</span><input type="text" id="speciflcation"/></p>
			<p><span class="title">单位:</span><input type="text" id="company"/></p>
			<p><span class="title">转换系数:</span><input type="text" id="coefficient"/></p>
            <p><span class="title">生产企业名称:</span><input type="text" id="productionName"/></p>
            <p><span class="title">商品名称:</span><input type="text" id="commodityName"/></p>
            <p><span class="title">中标价格:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">批准文号:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">批准文号有效期:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">是否进口药:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">包装材质:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">包装单位:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">最新零售价:</span><input type="text" id="biddingPrice"/></p>
		<p><span class="title">零售价出处:</span><input type="text" id="biddingPrice"/></p>
            <p><span class="title">质量层次:</span><input type="text" id="qualityLevel"/></p>
		<p><span class="title">质量层次说明:</span><input type="text" id="qualityLevel"/></p>
		<p><span class="title">有无药品检验报告:</span><input type="text" id="qualityLevel"/></p>
		<p><span class="title">药品检验报告编码:</span><input type="text" id="qualityLevel"/></p>
		<p><span class="title">药品检验报告有效期:</span><input type="text" id="qualityLevel"/></p>
		<p><span class="title">产品说明:</span><input type="text" id="qualityLevel"/></p>
            <p><span class="title">药品类别:</span><input type="text" id="drugCategory"/></p>
            <p><span class="title">药品交易状态:</span><input type="text" id="drugState"/></p>
	</div>
<script>
	var app = angular.module("myApp",[]);
	app.controller("myCtrl",function ($scope,$http) {
		$http({
			method:"get",
			url:"/findDrugItemsInfo",
		}).then(function successCallback(response) {
			//console.log(response.data)
            var list = response.data;
            console.log(list);
            $.each(list,function (index,item) {
            	list[index].biddingPrice=list[index].biddingPrice.biddingPrice;
				list[index].company=list[index].company.dictionariesName;
				list[index].qualityLevel=list[index].qualityLevel.dictionariesName;
				list[index].drugCategorys=list[index].drugCategorys.dictionariesName;
			})
            $("#table").reponsetable({
                "id":"table",
                "operation": "editer",
                "type":"numbers",
                "colum": [
                    {"field": "serialNumber","title": "药品流水号"},
                    {"field": "commonName","title": "通用名"},
                    {"field": "dosageForm","title": "剂型"},
                    {"field": "speciflcation","title": "规格"},
                    {"field": "company","title": "单位"},
                    {"field": "coefficient","title": "转换系数"},
                    {"field": "productionName","title": "生产企业"},
                    {"field": "commodityName","title": "商品名称"},
                    {"field": "biddingPrice","title": "中标价"},
                    {"field": "qualityLevel","title": "质量层次"},
                    {"field": "drugCategorys","title": "药品类别"},
                    {"field": "drugState","title": "交易状态"}
                ],
                "data": list
            });
		},function errorCallback(response) {

		});
	})
</script>
</body>
<script type="text/javascript">
	$(function(){
		$('#table').basictable({
			breakpoint: 768
		});


	})
	function addtr() {
		layer.open({
		  type: 1,
		  title: '编辑人员信息',
		  closeBtn: 1,
		  area: '516px',
		  skin: '#fff', //没有背景色
		  shadeClose: true,
		  content: $('#editcontent'),
		  btn:["保存","关闭"],
		  btn1:function(index,layero){
			  var Name=$("#Name").val();
			  var Age=$("#Age").val();
			  var Gender=$("#Gender").val();
			  var Height=$("#Height").val();
			  var Province=$("#Province").val();
			  var Sport=$("#Sport").val();
			  var obj = {
				"Name":Name,
			  	"Age": Age,
			  	"Gender": Gender,
			  	"Height": Height,
			  	"Province": Province,
				"Sport":Sport
			  };
			  reponse.addtr(obj, "table");
			  //reponse.editsavetr(obj, "table");
			  layer.close(drugInformation);
		  },btn2:function(index,layero){
			  layer.close(drugInformation);
		  }
		});
	};
	/*function uptr(btn, e) {
		var tr = $(btn).parent().parent();
		reponse.moveuptr(tr, "table");
	}*/
	/*function downtr(btn, e) {
		var tr = $(btn).parent().parent();
		reponse.moveDown(tr, "table");
	}*/
	function ExportExcel() {
		var tableobj=$("#table").data("tableObj");
		reponse.JSONToCSVConvertor(tableobj, true,"人员表格");
	}
	/*function resivetabledata(){
		var pp=$("#table").data("tableObj").data;
		alert(JSON.stringify(pp));
	}*/
	/*function reloadtable(){
		var data=[
			{"Name": "1111","Age": 15,"Gender": "1","Height": 189,"Province": "1","Sport": "1"},
			{"Name": "2222","Age": 15,"Gender": "2","Height": 2,"Province": "2","Sport": "2"},
			{"Name": "3333","Age": 15,"Gender": "4","Height": 189,"Province": "3","Sport": "3"}
		]
		reponse.reloadtable(data,"table");
	}*/
	function edittr(a, e) {
		var tr = $(a).parent().parent();
		reponse.resiverowdata(tr, "table");
		var rowdata=$("#table").data("rowdata");
		//alert(JSON.stringify(rowdata));
		//页面层-佟丽娅
		
		layer.open({
		  type: 1,
		  title: '编辑人员信息',
		  closeBtn: 1,
		  area: '516px',
		  skin: '#fff', //没有背景色
		  shadeClose: true,
		  content: $('#editcontent'),
		  btn:["保存","关闭"],
		  btn1:function(index,layero){
			  var Name=$("#Name").val();
			  var Age=$("#Age").val();
			  var Gender=$("#Gender").val();
			  var Height=$("#Height").val();
			  var Province=$("#Province").val();
			  var Sport=$("#Sport").val();
			  var obj = {
				"Name":Name,
			  	"Age": Age,
			  	"Gender": Gender,
			  	"Height": Height,
			  	"Province": Province,
				"Sport":Sport
			  };
			  reponse.editsavetr(obj, "table");
			  layer.close(drugInformation);
		  },btn2:function(index,layero){
			  layer.close(drugInformation);
		  }
		});
	}
	function deletetr(a, e) {
		var tr = $(a).parent().parent();
		reponse.deletetr(tr, e);
	}
	/*function coldata(){
		var pp=reponse.Columndata("Name","table");
		alert(pp);
	}*/
</script>
</html>